function scrollTop(){var a=$(document).scrollTop();var b=300;if(a>0){window.scroll(0,a-b);scrollTopTimer=setTimeout("scrollTop()",10)}else{clearTimeout(scrollTopTimer)}}function toggleScrollTopImg(){if($(document).scrollTop()>0){$("#scrollUp").show()}else{$("#scrollUp").hide()}}$(document).ready(function(){$(window).scroll(toggleScrollTopImg);$("#scrollUp").click(function(){scrollTopTimer=setTimeout("scrollTop()",10)});var a=new Array();var c=0;for(var b=0;b<_total_item;b++){a[b]=0}if(_type==="pic"){$(".choosebtn").click(function(){var e=$(this).attr("id");var d=e.substr(6,2);if(a[d-1]===0){if(c>=_limit_choice){alert("当前所选已经超过"+_limit_choice+"个");return}a[d-1]=1;$(this).parent(".thumbnail").css("border","1px solid #a8d154");$(this).prev(".chosen").css("display","block");$(e).text("点击取消");c++;$("#current_choice").text(c)}else{a[d-1]=0;$(this).parent(".thumbnail").css("border","1px solid #ddd");$(this).prev(".chosen").css("display","none");$(e).text("点击选定");c--;$("#current_choice").text(c)}})}else{if(_type==="text"){$("input.checkbox").click(function(){var d=$(this).attr("value");if(a[d-1]===0){if(c>=_limit_choice){alert("当前所选已经达到"+_limit_choice+"个");$(this).attr("checked",false);return}a[d-1]=1;c++}else{a[d-1]=0;c--}$("#current_choice").text(c)})}}$("#submit").click(function(){if(c===0){alert("你还没有做出自己的选择呢")}else{if(c>_limit_choice){alert("当前所选已经超过"+_limit_choice+"个")}else{var e={choices:[]};for(var d=0;d<_total_item;d++){if(a[d]==1){e.choices.push(d+1)}}var f={activityId:_activityId,participatorInfo:JSON.stringify(e)};$.ajax({type:"POST",url:"/vote/participateinactivity",data:f,dataType:"json",success:function(g){if(g.status==="success"){alert(g.content);window.location.href="/tou/result/"+_activityId}else{if(g.status==="fail"){alert(g.content)}}},error:function(i,g,h){if(g==="timeout"){alert("连接超时，请检查网络")}else{if(g==="error"||g==="parseerror"){alert("提交失败："+g+" "+h.toString())}}}})}}});$.ajax({type:"GET",url:"/vote/check-already-par?activityId="+_activityId,success:function(d){if(d!=="0"){window.location.href="/tou/result/"+_activityId}},error:function(g,d,f){if(d==="timeout"){alert("连接超时，请检查网络")}else{if(d==="error"||d==="parseerror"){alert("失败："+d+" "+f.toString())}}}})});